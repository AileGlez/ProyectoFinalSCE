<?xml version="1.0" encoding="UTF-8" ?>
<process
    name="miTienda"
    targetNamespace="http://enterprise.netbeans.org/bpel/MiTienda/miTienda"
    xmlns:tns="http://enterprise.netbeans.org/bpel/MiTienda/miTienda"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:sxt="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Trace" 
    xmlns:sxed="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Editor2"
    xmlns:sxat="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/Attachment"
    xmlns:sxeh="http://www.sun.com/wsbpel/2.0/process/executable/SUNExtension/ErrorHandling">

   <sequence>
      <receive name="Recepcion" createInstance="yes"/>
      <assign name="AsigStock"/>
      <invoke name="ComprobarStock"/>
      <if name="If1">
         <sequence name="Sequence1">
            <assign name="AsigCobro"/>
            <invoke name="ComprobarCobro"/>
            <if name="If2">
               <sequence name="Sequence3">
                  <assign name="AsigStockVenta"/>
                  <invoke name="ActualizarStock"/>
                  <assign name="AsigCobroVenta"/>
                  <invoke name="ActualizarCobro"/>
               </sequence>
               <else>
                  <sequence name="Sequence4">
                     <assign name="AsigNoCobro"/>
                     <reply name="RespuestaNoCobro"/>
                  </sequence>
               </else>
            </if>
         </sequence>
         <else>
            <sequence name="Sequence2">
               <assign name="AsigNoStock"/>
               <reply name="RespuestaNoStock"/>
            </sequence>
         </else>
      </if>
      <assign name="AsigOrden"/>
      <invoke name="OrdenEnvio"/>
      <assign name="AsigOk"/>
      <reply name="RespuestaOk"/>
   </sequence>
</process>
